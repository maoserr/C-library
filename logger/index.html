<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<title>Mao Yu's kitchen - Projects</title>
	<link rel="stylesheet" type="text/css" href="DoxyCSS.css" media="screen" />
	<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="robots" content="index, follow" />
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
</head>
<body>
	<div id="header">
		<ul>
		
			<li><a href="http://www.mao-yu.com/index.html">Home</a></li>
			
			<li><a href="http://www.mao-yu.com/projects.html" class="active">Projects</a></li>
			
			<li><a href="http://www.mao-yu.com/resources.html">Resources</a></li>
			
			<li><a href="http://www.mao-yu.com/notes.html">Notes</a></li>
			
		</ul>
		<a href="http://www.mao-yu.com/"><img src="http://www.mao-yu.com/images/logo.png" alt="Logo" style="float:left"/></a>
			<h1>Mao Yu</h1>
		<span id="slogan">Casual code cook...</span>
	</div>

<!-- Generated by Doxygen 1.7.0 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>C logger </h1>  </div>
</div>
<div class="contents">
<h3 class="version">0.1 </h3><dl class="author"><dt><b>Author:</b></dt><dd>Mao Yu (<a href="http://www.mao-yu.com">http://www.mao-yu.com</a>) </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>Created: Saturday, June 19, 2010 </dd>
<dd>
Updated: Saturday, June 19, 2010 </dd></dl>
<dl class="user"><dt><b>Installation:</b></dt><dd><ol type="1">
<li>Downloads:<ul>
<li><a href="http://github.com/maoserr/C-library/tarball/master">tarball</a>.</li>
<li><a href="http://github.com/maoserr/C-library/zipball/master">zip</a>.</li>
</ul>
</li>
<li>Add header and source file to your project<ul>
<li><a class="el" href="logger_8h.html" title="Simple logging interface.">logger.h</a></li>
<li>logger.c </li>
</ul>
</li>
</ol>
</dd></dl>
<dl class="user"><dt><b>Usage:</b></dt><dd><ul>
<li>Call <a class="el" href="logger_8h.html#a7e4dea9bc3d6db39e31664cefc765862" title="Initializes the logging instance.">log_init()</a> to initializing logging to different interfaces</li>
<li>Optionally Use <a class="el" href="logger_8h.html#a89bd7d56c7f3aca98a5f61d3297b5e52" title="Sets global logging level.">log_setlevel()</a>, <a class="el" href="logger_8h.html#a0c54fdf5f2b4750048f491460e309a30" title="Sets file logging level.">log_setlevel_file()</a>, <a class="el" href="logger_8h.html#abbd9d642fd7e0c528fd536e7ca04768c" title="Sets console logging level.">log_setlevel_console()</a>, and <a class="el" href="logger_8h.html#a64a92c54da1858ef8587eccc450b99f8" title="Sets callback logging level.">log_setlevel_cb()</a> to set a logging level</li>
<li>Optionally create a macro to wrap <a class="el" href="logger_8h.html#a5961772a75d59a11273b85632f816af7" title="Logs a message.">log_log()</a>. Example: <div class="fragment"><pre class="fragment"><span class="preprocessor"> #  define LOG(LVL,...) log_log(LVL,__FILE__,_FUNCTION__ ,__LINE__,__VA_ARGS__)</span>
</pre></div></li>
<li>Use the <a class="el" href="logger_8h.html#a5961772a75d59a11273b85632f816af7" title="Logs a message.">log_log()</a> function to log messages in a printf format</li>
<li>Call <a class="el" href="logger_8h.html#ab2c6faf6d03a5e0e458b683f1dc311fb" title="Closes logging facilities (closes log file if opened).">log_end()</a> to close logging interface</li>
</ul>
</dd></dl>
<dl class="user"><dt><b>An example program:</b></dt><dd><div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;stdio.h&gt;</span>
<span class="preprocessor"> #include &quot;<a class="code" href="logger_8h.html" title="Simple logging interface.">logger.h</a>&quot;</span>
<span class="preprocessor"> #define LOG(LVL,...) log_log(LVL,__FILE__,__FUNCTION__ ,__LINE__,__VA_ARGS__)</span>
<span class="preprocessor"></span>
 <span class="keywordtype">void</span> test_cb(<a class="code" href="logger_8h.html#a960027cf11c320c500efb2574c268840">LogStr</a> msg){
        printf(<span class="stringliteral">&quot;-+-+-+&quot;</span>);
        fputs(msg,stdout);
 }

 <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[]){
        <span class="keywordflow">if</span>( <a class="code" href="logger_8h.html#a7e4dea9bc3d6db39e31664cefc765862" title="Initializes the logging instance.">log_init</a>(<span class="stringliteral">&quot;test.log&quot;</span>,<a class="code" href="logger_8h.html#ae6b7425042949b060d8fe1a5764c6985a84833fedef776f870c1b2616c53b12ea">LOGBOOL_FALSE</a>,test_cb) != <a class="code" href="logger_8h.html#adf049476138fc6f40bfbd4c0df045756af44e81ec77a7f1837d3dccbffd8a0e19">LOGRET_OK</a> )
                <span class="keywordflow">return</span> -1;

        LOG(1,<span class="stringliteral">&quot;---Testing logging functionality!&quot;</span>);
        LOG(11,<span class="stringliteral">&quot;---Can&#39;t see this! (log level is higher than default)&quot;</span>);

        <a class="code" href="logger_8h.html#a89bd7d56c7f3aca98a5f61d3297b5e52" title="Sets global logging level.">log_setlevel</a>(11);
        LOG(11,<span class="stringliteral">&quot;---Now can see this!&quot;</span>);

        <a class="code" href="logger_8h.html#abbd9d642fd7e0c528fd536e7ca04768c" title="Sets console logging level.">log_setlevel_console</a>(10);
        LOG(11,<span class="stringliteral">&quot;---Now only shown in file and cb!&quot;</span>);

        <a class="code" href="logger_8h.html#ab2c6faf6d03a5e0e458b683f1dc311fb" title="Closes logging facilities (closes log file if opened).">log_end</a>();
 }
</pre></div> Running this program will result in this in the console: <div class="fragment"><pre class="fragment">
logger.c(206)[main]---Testing logging functionality!
-+-+-+logger.c(206)[main]---Testing logging functionality!
logger.c(210)[main]---Now can see this!
-+-+-+logger.c(210)[main]---Now can see this!
-+-+-+logger.c(213)[main]---Now only shown in file and cb!
</pre></div> And show this in <em>test.log</em> <div class="fragment"><pre class="fragment">
logger.c(206)[main]---Testing logging functionality!
logger.c(210)[main]---Now can see this!
logger.c(213)[main]---Now only shown in file and cb!
</pre></div></dd></dl>
<p>This is public domain code </p>
</div>
<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.0 </small></address>
</body>
</html>
