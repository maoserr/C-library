<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<title>Mao Yu's kitchen - Projects</title>
	<link rel="stylesheet" type="text/css" href="DoxyCSS.css" media="screen" />
	<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="robots" content="index, follow" />
	<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
</head>
<body>
	<div id="header">
		<ul>
		
			<li><a href="http://www.mao-yu.com/index.html">Home</a></li>
			
			<li><a href="http://www.mao-yu.com/projects.html" class="active">Projects</a></li>
			
			<li><a href="http://www.mao-yu.com/resources.html">Resources</a></li>
			
			<li><a href="http://www.mao-yu.com/notes.html">Notes</a></li>
			
		</ul>
		<a href="http://www.mao-yu.com/"><img src="../DoxyLogo.png" alt="Logo" style="float:left"/></a>
			<h1>Mao Yu</h1>
		<span id="slogan">Casual code cook...</span>
	</div>

<!-- Generated by Doxygen 1.7.0 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Argument parser </h1>  </div>
</div>
<div class="contents">
<h3 class="version">0.1 </h3><dl class="author"><dt><b>Author:</b></dt><dd>Mao Yu (<a href="http://www.mao-yu.com">http://www.mao-yu.com</a>) </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>Created: Friday, May 28, 2010 </dd>
<dd>
Updated: Saturday, June 26, 2010 </dd></dl>
<dl class="user"><dt><b>Purpose:</b></dt><dd>Argparser provides simple argument parsing functionality given command line arguments or a configuration file. </dd></dl>
<dl class="user"><dt><b>Installation:</b></dt><dd><ol type="1">
<li>Downloads:<ul>
<li><a href="http://github.com/maoserr/C-library/tarball/master">tarball</a>.</li>
<li><a href="http://github.com/maoserr/C-library/zipball/master">zip</a>.</li>
</ul>
</li>
<li>Add header and source file to your project<ul>
<li><a class="el" href="argparser_8h.html" title="argparser include file.">argparser.h</a></li>
<li>argparser.c </li>
</ul>
</li>
</ol>
</dd></dl>
<dl class="user"><dt><b>Usage:</b></dt><dd><ul>
<li>Call <a class="el" href="argparser_8h.html#a9fcc2efcd57d7ee9d38da419da7bb1f8" title="Add valid arguments for parsing.">args_addarg()</a> to add valid options. this function will copy the short, long, and help string.</li>
<li>Call <a class="el" href="argparser_8h.html#aa1647c54cb042440312140064c56f2f0" title="Parses argc and argv for options.">args_parse()</a> and pass in <b>argc</b> and <b>argv</b> to parse.</li>
<li>Optionally use <a class="el" href="argparser_8h.html#a2db6a9f1060350dc792a428388feaabb" title="Parses a config file for options.">args_parsefile()</a> to parse a config file.</li>
<li>Use <a class="el" href="argparser_8h.html#ad48f2cb900240a887c4ff3cda927f0ca" title="Checks for an option.">args_check()</a>,<a class="el" href="argparser_8h.html#a5eaaece9deda4c281aeffb85ce827e33" title="Retrieves and unnamed option based on index.">args_getunnamed()</a>,<a class="el" href="argparser_8h.html#aeab9dcd5c2e1cbc00bccc79d30648e32" title="Retrieves named option based on short or long name.">args_getnamed()</a> to detect arguments.</li>
<li>Optionally use <a class="el" href="argparser_8h.html#ad0078ab303e8b620776bd86926484371" title="Prints a list of options and help string.">args_print()</a> to show valid arguments list.</li>
<li>Optionally use <a class="el" href="argparser_8h.html#a3daa61245b073112649e2148d21f9c49" title="Prints a list of unknown options.">args_unknown()</a> to show unknown arguments. (this function will return ARGBOOL_TRUE if there are unknowns)</li>
<li>Call <a class="el" href="argparser_8h.html#a27ea51fc491cd85e4f9fc20f03bc273c" title="Frees all resources.">args_free()</a> to free all resources.</li>
</ul>
</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd></dd></dl>
<dl class="user"><dt><b></b></dt><dd><ol type="1">
<li>Short arguments should be 1 or 2 letters.<ul>
<li>Example: '-o', or config file format 'o'</li>
</ul>
</li>
<li>Long arguments needs to be longer than 3 letters and shorter than 10.<ul>
<li>Example: '-one', or config file format 'one'</li>
</ul>
</li>
<li>Arguments that accept values are space delimited in command line, but '=' delimited in config file<ul>
<li>Example '-type moose', or config file format 'type=moose'</li>
</ul>
</li>
<li>Unnamed arguments are arguments that are not prefixed with '-' and are not values for named arguments.</li>
<li>Unknown arguments are arguments prefixed with '-' but are not validly added arguments.</li>
</ol>
</dd></dl>
<dl class="user"><dt><b>An example program</b></dt><dd><div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;stdio.h&gt;</span>
<span class="preprocessor"> #include &quot;<a class="code" href="argparser_8h.html" title="argparser include file.">argparser.h</a>&quot;</span>

 <span class="keywordtype">int</span> main( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[] ){
        <a class="code" href="argparser_8h.html#a9fcc2efcd57d7ee9d38da419da7bb1f8" title="Add valid arguments for parsing.">args_addarg</a>(<span class="stringliteral">&quot;a&quot;</span>,<span class="stringliteral">&quot;all&quot;</span>,<span class="stringliteral">&quot;Do all things&quot;</span>,ARGVAL_NONE);
        <a class="code" href="argparser_8h.html#a9fcc2efcd57d7ee9d38da419da7bb1f8" title="Add valid arguments for parsing.">args_addarg</a>(<span class="stringliteral">&quot;v&quot;</span>,NULL,<span class="stringliteral">&quot;Set verbosity level&quot;</span>,ARGVAL_STRING);
        <a class="code" href="argparser_8h.html#a9fcc2efcd57d7ee9d38da419da7bb1f8" title="Add valid arguments for parsing.">args_addarg</a>(NULL,<span class="stringliteral">&quot;yo-dawg&quot;</span>,<span class="stringliteral">&quot;Yo dawg&quot;</span>,ARGVAL_STRING);
        <a class="code" href="argparser_8h.html#a9fcc2efcd57d7ee9d38da419da7bb1f8" title="Add valid arguments for parsing.">args_addarg</a>(<span class="stringliteral">&quot;h&quot;</span>,<span class="stringliteral">&quot;help&quot;</span>,<span class="stringliteral">&quot;Display help&quot;</span>,ARGVAL_NONE);
        <span class="comment">// The following will be discarded</span>
        <a class="code" href="argparser_8h.html#a9fcc2efcd57d7ee9d38da419da7bb1f8" title="Add valid arguments for parsing.">args_addarg</a>(NULL,NULL,<span class="stringliteral">&quot;No names!&quot;</span>,ARGVAL_NONE);

        <span class="keywordflow">if</span>( (<a class="code" href="argparser_8h.html#aa1647c54cb042440312140064c56f2f0" title="Parses argc and argv for options.">args_parse</a>(argc,argv) != <a class="code" href="argparser_8h.html#abfab5d91bea2a5aef909cf01bd6f0c83ac11f07e5ec6793790ff8bdb5b22ccb22">ARGRET_OK</a>) &amp;&amp;
                        (<a class="code" href="argparser_8h.html#a2db6a9f1060350dc792a428388feaabb" title="Parses a config file for options.">args_parsefile</a>(<span class="stringliteral">&quot;./testconfig&quot;</span>) != <a class="code" href="argparser_8h.html#abfab5d91bea2a5aef909cf01bd6f0c83ac11f07e5ec6793790ff8bdb5b22ccb22">ARGRET_OK</a>) )
                printf(<span class="stringliteral">&quot;Error occurred parsing command line.\n&quot;</span>);
        <span class="keywordflow">else</span>{
                <a class="code" href="argparser_8h.html#ae89637d0623448904a8245394ed829a8" title="String type.">ArgStr</a> verbosity;
                <a class="code" href="argparser_8h.html#ae89637d0623448904a8245394ed829a8" title="String type.">ArgStr</a> unnamed[3];

                <span class="keywordflow">if</span>( <a class="code" href="argparser_8h.html#ad48f2cb900240a887c4ff3cda927f0ca" title="Checks for an option.">args_check</a>(<span class="stringliteral">&quot;a&quot;</span>) )
                        printf(<span class="stringliteral">&quot;Doing all things!\n&quot;</span>);
                <span class="keywordflow">if</span>( verbosity = <a class="code" href="argparser_8h.html#aeab9dcd5c2e1cbc00bccc79d30648e32" title="Retrieves named option based on short or long name.">args_getnamed</a>(<span class="stringliteral">&quot;v&quot;</span>) )
                        printf(<span class="stringliteral">&quot;Verbosity set to %s.\n&quot;</span>,verbosity);
                <span class="keywordflow">if</span>( <a class="code" href="argparser_8h.html#ad48f2cb900240a887c4ff3cda927f0ca" title="Checks for an option.">args_check</a>(<span class="stringliteral">&quot;h&quot;</span>) )
                        <a class="code" href="argparser_8h.html#ad0078ab303e8b620776bd86926484371" title="Prints a list of options and help string.">args_print</a>();
                <span class="keywordflow">if</span>( unnamed[0] = <a class="code" href="argparser_8h.html#a5eaaece9deda4c281aeffb85ce827e33" title="Retrieves and unnamed option based on index.">args_getunnamed</a>(1) )
                        printf(<span class="stringliteral">&quot;First unnamed: %s.\n&quot;</span>,unnamed[0]);
                <span class="keywordflow">if</span>( unnamed[1] = <a class="code" href="argparser_8h.html#a5eaaece9deda4c281aeffb85ce827e33" title="Retrieves and unnamed option based on index.">args_getunnamed</a>(2) )
                        printf(<span class="stringliteral">&quot;Second unnamed: %s.\n&quot;</span>,unnamed[1]);
                <span class="keywordflow">if</span>( unnamed[2] = <a class="code" href="argparser_8h.html#a5eaaece9deda4c281aeffb85ce827e33" title="Retrieves and unnamed option based on index.">args_getunnamed</a>(3) )
                        printf(<span class="stringliteral">&quot;Third unnamed: %s.\n&quot;</span>,unnamed[2]);
                <a class="code" href="argparser_8h.html#a3daa61245b073112649e2148d21f9c49" title="Prints a list of unknown options.">args_unknown</a>();
        }
        <a class="code" href="argparser_8h.html#a27ea51fc491cd85e4f9fc20f03bc273c" title="Frees all resources.">args_free</a>();
 }
</pre></div> Running this code with this command: <div class="fragment"><pre class="fragment">
argparser -a -v DEBUG hello you good people
</pre></div> Will show this output: <div class="fragment"><pre class="fragment">
Doing all things!
Verbosity set to DEBUG.
First unnamed: hello.
Second unnamed: you.
Third unnamed: good.
</pre></div> See <a class="el" href="argparser_8h.html">here</a> for full API documentation.</dd></dl>
<dl class="user"><dt><b>License</b></dt><dd>This is public domain code. </dd></dl>
</div>
<hr class="footer"/><address class="footer"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.0 </small></address>
</body>
</html>
